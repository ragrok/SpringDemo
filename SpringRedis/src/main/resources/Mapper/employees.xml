<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.github.mapper.EmpMapper">

	<resultMap type="cn.com.github.entity.Employees" id="BasicEmp">
		<id column="emp_no" property="emp_no" jdbcType="DOUBLE" />
		<result column="birth_date" property="birth_date" jdbcType="VARCHAR" />
		<result column="first_name" property="first_name" jdbcType="VARCHAR" />
		<result column="last_name" property="last_name" jdbcType="VARCHAR" />
		<result column="gender" property="gender" jdbcType="CHAR" />
		<result column="hire_date" property="hire_date" jdbcType="VARCHAR" />
	</resultMap>


	<sql id="whereEmpNo">
		<if test="employees.emp_no != '' and employees.emp_no != null">
			emp_no = #{emp_no}
		</if>
	</sql>

	<!--实现mapper接口 -->
	<select id="findEmpById" resultType="cn.com.github.entity.Employees"
		parameterType="int">
		select * from employees
		<where>
			<include refid="whereEmpNo"></include>
		</where>
	</select>

	<select id="findByEmpNo" resultType="cn.com.github.entity.Employees"
		parameterType="String">
		select * from employees
		<where>
			<if test="first_name !='' and first_name != null">
				first_name like '%${first_name,jdbcType=VARCHAR}%'
			</if>
			<if test="emp_no  != null and emp_no != ''">
			   <foreach collection="ids" item="user_id" open="and (" close=")" separator = "or">
			        id = #{user_id}
			   </foreach>
			</if>
		</where>
	</select>



	<insert id="insertEmpNo" parameterType="cn.com.github.entity.Employees">
		insert into employees values
		(#{emp_no},#{birth_date},#{first_name},#{last_name},#{gender},#{hire_date})
	</insert>

	<delete id="deleteEmpNo" parameterType="int">
		delete from employees
		<where>
			<include refid="whereEmpNo"></include>
		</where>
	</delete>

	<update id="updateEmpNo" parameterType="cn.com.github.entity.Employees">
		update employees set birth_date = #{birth_date}, first_name = #{first_name},
		last_name = #{last_name},gender = #{gender} where emp_no = #{emp_no}
	</update>

</mapper>